//localstorage.js
;(function(){var LocalStorage={name:'localStorage',init:function(){if(!window.localStorage){return false}this._storage=window.localStorage;return this},setStorage:function(key,value){this._storage.setItem(key,value);return true},getStorage:function(key,callback){var item=this._storage.getItem(key);var value=item?item:null;callback(value)},removeStorage:function(key){this._storage.removeItem(key);return true},clearStorage:function(){if(this._storage.clear){this._storage.clear()}else{for(i in this._storage){if(this._storage[i].value){this.remove(i)}}}return true}};var GlobalStorage={name:'globalStorage',init:function(){if(!window.globalStorage){return false}this._storage=globalStorage[location.hostname];return this},setStorage:function(key,value){this._storage.setItem(key,value);return true},getStorage:function(key,callback){var item=this._storage.getItem(key);var value=item?item.value:null;callback(value)},removeStorage:function(key){this._storage.removeItem(key);return true},clearStorage:function(){if(this._storage.clear){this._storage.clear()}else{for(i in this._storage){if(this._storage[i].value){this.remove(i)}}}return true}};var UserData={name:'userData',init:function(){this.Master="ie6+";if(!$.browser.msie)return false;this.file_name='ECStore_VS';if(!this._storage){try{var o=this._storage=document.createElement('input');o.type='hidden';o.addBehavior('#default#userData');document.body.appendChild(o);o.save(this.file_name)}catch(e){}}return this},setStorage:function(key,value){this._storage.setAttribute(key,value);this._storage.save(this.file_name);return true},getStorage:function(key,callback){this._storage.load(this.file_name);callback(this._storage.getAttribute(key))},removeStorage:function(key){this._storage.removeAttribute(key);this._storage.save(this.file_name);return true},clearStorage:function(){this._storage.load(this.file_name);var date=new Date();date.setMinutes(date.getMinutes()-1);this._storage.expires=date.toUTCString();this._storage.save(this.file_name);return true}};var SessionStorage={name:'sessionStorage',init:function(){if(!window.openDatabase)return false;this._storage=window.openDatabase("viewState","1.0","ECStore ViewState Storage",20000);this._createTable();return this},setStorage:function(key,value){this._storage.transaction(function(tx){tx.executeSql("SELECT v FROM SessionStorage WHERE k = ?",[key],function(tx,result){if(result.rows.length){tx.executeSql("UPDATE SessionStorage SET v = ?  WHERE k = ?",[value,key])}else{tx.executeSql("INSERT INTO SessionStorage (k, v) VALUES (?, ?)",[key,value])}})});return true},getStorage:function(key,callback){this._storage.transaction(function(tx){v=tx.executeSql("SELECT v FROM SessionStorage WHERE k = ?",[key],function(tx,result){if(result.rows.length)return callback(result.rows.item(0).v);callback(null)})})},removeStorage:function(key){this._storage.transaction(function(tx){tx.executeSql("DELETE FROM SessionStorage WHERE k = ?",[key])});return true},clearStorage:function(){this._storage.transaction(function(tx){tx.executeSql("DROP TABLE SessionStorage",[])});return true},_createTable:function(){this._storage.transaction(function(tx){tx.executeSql("SELECT COUNT(*) FROM SessionStorage",[],function(){},function(tx,error){tx.executeSql("CREATE TABLE SessionStorage (k TEXT, v TEXT)",[],function(){})})})}};var empty={setStorage:function(){},getStorage:function(){},removeStorage:function(){},clearStorage:function(){}};BrowserStore=new Class({init:function(){this.storage=SessionStorage.init()||GlobalStorage.init()||LocalStorage.init()||UserData.init()||empty;return this},set:function(key,value){value&&typeof value==='string'&&this.storage.setStorage(key,value);return this},get:function(key,callback){this.storage.getStorage(key,callback)},remove:function(key){if(!key||!this.storage)return false;key&&this.storage.removeStorage(key);return this},clear:function(){if(!this.storage)return false;this.storage.clearStorage();return this}})})();(function(){browserStore=null;withBrowserStore=function(callback){if(browserStore)return callback(browserStore);$(function(){if((browserStore=new BrowserStore())){callback(browserStore)}else{$(window).on('load',function(){callback((browserStore=new BrowserStore()))})}})}})();
//tips.js
;var Tips=new Class({options:{form:'inline',target:'.form-row',type:'error','class':'caution'},init:function(options){this.setOptions(options);this.target=$(this.options.target);return this.build()},build:function(options){if(options)this.setOptions(options);options=this.options;var tag=options.form=='inline'?'<span>':'<div>';this.element=this.target.data('tipInstance')||$(tag,{'style':'display: none;','class':'icon-'+(options.type==='success'?'checkmark-c':'alert')+' '+options['class']});this.target.data('tipInstance',this.element);this.element[options.where||'appendTo'](this.target);this.trigger('load');return this},show:function(msg,type,options){options=options||{};if(type)options.type=type;if(!this.element)this.build(options);else{this.element.attr('class',this.element.attr('class').replace(/\b(icon-)[\w-]+\b/,'$1'+((options.type||this.options.type)==='success'?'checkmark-c':'alert')))}this.element.html(msg||'').css('display','');this.trigger('show');return this},hide:function(destroy){this.element=this.target.data('tipInstance');if(!this.element)return;if(destroy)this.element.remove();else this.element.css('display','none');this.trigger('hide');return this},success:function(msg,options){return this.show(msg,'success',options)},error:function(msg,options){return this.show(msg,'error',options)}});
//formplus.js
;var passwordStrength=function(value,key,className){var minLength=5;var maxLength=20;var lower=/[a-z]/g;var upper=/[A-Z]/g;var numberic=/\d/g;var symbols=/[\W_]/g;var repeat=new RegExp('(.{'+parseInt(value.length/2)+',})\1','g');var status='poor';var strength=-1;if(!value||value.length<minLength){strength=-1}else{strength=parseInt(value.length/minLength)-1}if(value.match(repeat)){strength--}if(value.match(lower)||value.match(upper)){strength++}if(value.match(numberic)){strength++}if(value.match(symbols)){strength++}if(value.length>minLength&&strength<2){strength++}switch(strength){case-1:case 0:case 1:status='poor';break;case 2:status='weak';break;case 3:status='good';break;default:status='strong';break}key.className=(className?className+' ':'')+'password-'+status};function changeVerify(element,hasEvent){$(element).each(function(index){var $el=$(this);var url;var img;if(this.tagName==='IMG'){img=$(this);url=$el.attr('src')}else{img=$el.siblings('img');url=$el.attr('href')}if(hasEvent)$el.on('click',function(){changeCode(img,url)});else changeCode(img,url)})}function changeCode(img,url){url=url||img.attr('src');var random=+new Date;var urlrandom=url.match(/\b_=([\d]+)\b/);if(urlrandom){url=url.replace(urlrandom[1],random)}else{url+=(url.indexOf('?')>-1?'&':'?')+'_='+random}img.attr('src',url);return false}function checkAll(el,elements){$(elements).prop('checked',$(el).prop('checked'))}var Placeholder={support:(function(){return'placeholder'in document.createElement('input')})(),className:'placeholder',init:function(){if(!this.support){this.create($('input, textarea'))}},build:function(input,html){var parent=input.parent();var $this=Placeholder;if(parent.css('position')=='static'){parent.css('position','relative')}var placeholder=input.prev('.'+this.className)||$('<span>',{'class':this.className,html:html,style:'visibility:hidden;'}).before(input).locate({target:input,from:'lc',to:'lc',offset:{x:4},offsetParent:true}).on('click',function(e){$this.hide(this);input.focus()});return placeholder},create:function(inputs){var $this=this;$(inputs).each(function(index){var el=$(this);if(!$this.support&&el.attr('placeholder')){var value=el.attr('placeholder');el.data('placeholder',$this.build(el,value));$this.show(el);el.on('focusin',function(e){$this.hide(this)}).on('focusout',function(e){$this.show(this)})}})},show:function(el){if(!this.support&&el.value===''&&$(el).is(':visible')&&$(el).css('visibility')!=='hidden'){$(el).data('placeholder').css('visibility','visible')}},hide:function(el){if(!this.support)($(el).data('placeholder')||$(el)).css('visibility','hidden')}};$(function(){var forms=document.forms;if(forms.length){changeVerify($('form .auto-change-verify-handle'),true);$('form .action-remember-account').on('change',function(e){var expiresDate=new Date();expiresDate.setTime(expiresDate.getTime()+(7*24*60*60*1000));if(this.checked){$.cookie('S[SIGN][REMEMBER]','1',{expires:expiresDate})}else{$.cookie('S[SIGN][REMEMBER]','0',{expires:expiresDate})}}).trigger('change');$('form [data-remote]').on('change',function(e){var element=$(this);var value=this.value;var name=this.name;var url=$(this).data('remote');var method=element.data('remoteType')||element.parents('form').attr('method');var callback=element.data('remoteCallback');if(url&&name&&value){$[method](url,name+'='+value,function(rs){if(typeof rs==='string'){rs=JSON.parse(rs)}if(callback)return callback.call(element,rs);var tips=new Tips({target:element.closest('.form-row')});if(rs.error){return tips.error(rs.message)}else if(rs.success){return tips.success(rs.message)}})}})}Placeholder.init()});
//validate
;var validatorMap={'required':['此项必填',function(element,v,type){if(type=='select'){var index=element.selectedIndex;v=element.options[index].value;return index>=0&&(v!=''&&v!='_NULL_')}return v!==null&&v.length!==0}],'minlength':[function(element,v,props){if($.type(props)!='null'){return'输入不正确，至少'+props+'个字符'}return''},function(element,v,type,parent,props){return v===null||v===''||($.type(props)!='null'?v.length>=+props:true)}],'maxlength':[function(element,v,props){if($.type(props)!='null'){return'输入不正确，最多'+props+'个字符'}return''},function(element,v,type,parent,props){return v===null||v===''||($.type(props)!='null'?v.length<=+props:true)}],'number':['请填写数值',function(element,v){return!isNaN(v)&&!/^\s+$/.test(v)}],'digits':['只能填写数字',function(element,v){return!/[^\d]/.test(v)}],'posint':['请填写正整数',function(element,v){return(!/[^\d]/.test(v)&&v>0)}],'natural':['请填写大于等于0的整数',function(element,v){return(!/[^\d]/.test(v)&&v>=0)}],'positive':['请填写大于0的数值',function(element,v){return(!isNaN(v)&&!/^\s+$/.test(v)&&v>0)}],'nonneg':['请填写大于等于0的数值',function(element,v){return(!isNaN(v)&&!/^\s+$/.test(v)&&v>=0)}],'alpha':['只能填写英文字母',function(element,v){return v===null||v==''||/^[a-zA-Z]+$/.test(v)}],'alphanumber':['请填写英文字母或者数字',function(element,v){return!/\W/.test(v)||/^[a-zA-Z0-9]+$/.test(v)}],'alphanumcn':['请填写英文字母、中文或数字',function(element,v){return!/\W/.test(v)||/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(v)}],'uncnchar':['不能填写中文字符',function(element,v){return!/\W/.test(v)||!/^[\u4e00-\u9fa5]+$/.test(v)}],'date':['请填写日期，格式yyyy-mm-dd',function(element,v){return v===null||v==''||/^(?:19|20)[0-9]{2}[\/-](?:[1-9]|0[1-9]|1[012])[\/-](?:[1-9]|0[1-9]|[12][0-9]|3[01])$/.test(v)}],'email':['请填写正确的email地址',function(element,v){return v===null||v==''||/^[a-z\d][a-z\d_.]*@[\w-]+(?:\.[a-z]{2,})+$/i.test(v)}],'emaillist':['请填写正确的email地址，以","或";"分隔',function(element,v){return v===null||v==''||/^(?:[a-z\d][a-z\d_.]*@[\w-]+(?:\.[a-z]{2,})+[,;\s]?)+$/i.test(v)}],'mobile':['请填写正确的手机号码',function(element,v){return v===null||v==''||/^0?1[34578]\d{9}$/.test(v)}],'landline':['请填写正确的座机号码',function(element,v){return v===null||v==''||/^(0\d{2,3}-?)?[2-9]\d{5,7}(-\d{1,5})?$/.test(v)}],'tel':['请填写正确的固话或手机号码',function(element,v){return v===null||v==''||/^0?1[34578]\d{9}$|^(0\d{2,3}-?)?[2-9]\d{5,7}(-\d{1,5})?$/.test(v)}],'zip':['请填写正确的邮编',function(element,v){return v===null||v==''||/^\d{6}$/.test(v)}],'url':['请填写正确的网址',function(element,v){var pattern="^((https|http|ftp|rtsp|mms)?://)"+"?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?"+"(([0-9]{1,3}\.){3}[0-9]{1,3}"+"|"+"([0-9a-z_!~*'()-]+\.)*"+"([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\."+"[a-z]{2,6})"+"(:[0-9]{1,4})?"+"((/?)|"+"(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$";var re=new RegExp(pattern,'i');return v===null||v==''||re.test(v)}],'area':['请选择完整的地区',function(element,v){return $(element).find('select').every(function(sel){var selValue=sel.value;if(!$(sel).is(':visible'))return true;return selValue!=''&&selValue!='_NULL_'})}],'equalto':['两次填写不一致',function(element,v,type,parent,props){var sibling=$(parent).find('[name="'+props+'"]');return!sibling[0]||v===sibling.val()}],'oneoftwo':['请至少填写一项',function(element,v,type,parent,props){var sibling=$(parent).find('[name="'+props+'"]');return!sibling[0]||v||sibling.val()}],'onerequired':['请至少选择一项',function(element,v,type,parent){var name=element.name;return $(parent).find('input:checked[type='+type+']'+(name?'[name="'+name+'"]':'')).length}],'birthday':['请设置正确的生日',function(element,v){if(/^(?:19|20)[0-9]{2}[\/-](?:[1-9]|0[1-9]|1[012])[\/-](?:[1-9]|0[1-9]|[12][0-9]|3[01])$/.test(v)){var d=new Date(Date.parse(v.replace(/-/g,"/")));var curDate=new Date();if(d>=curDate){return false}else{return true}}else{return v===null||v===''}}]};var validation=function(container,options){if(typeof options==='string'){options={range:options}}options=$.extend({group:'.form-row',tips:{form:'inline','class':'caution'}},options||{});var ATTR='data-validate';var AllAttr='['+ATTR+'], [pattern], [type=number], [type=email], [type=tel], [type=url], [type=date], [required], [minlength], [maxlength], [data-equalto], [data-oneoftwo]';container=container?$(container):null;if(!container)return true;var config=container.data('validateConfig');var dataopts=dataOptions(container,'validate');if(typeof config==='string'){config=$.parseJSON(config)}options=$.extend(options,config||{},dataopts);if(container.is('form'))container.attr('novalidate','novalidate');var formElements=(container.is('form')||options.range==='all')?container.find(AllAttr):$(container);var errElements=[];formElements.each(function(i){var element=$(this);if(!element.is(':visible'))return true;var vtypes=[];if(element.attr(ATTR)){vtypes=element.attr(ATTR).split(' ')}if(element.attr('required')){vtypes.unshift('required')}var msg=element.attr('data-caution')||'';var pattern=element.attr('pattern');var re=new RegExp('^(?:'+pattern+')$');var ckey='custom_'+$.guid++;if(msg){msg=msg.split(/&&|&amp;&amp;/)}else{msg=[]}if(pattern){if(!validatorMap[ckey]){validatorMap[ckey]=[element.attr('data-attention')||'',function(element,v){return v===null||v===''||re.test(v)}]}vtypes.push(ckey)}$.each(['number','url','email','tel','date'],function(i,type){if(element.attr('type')===type){vtypes.push(type)}});$.each(['minlength','maxlength','data-equalto','data-oneoftwo'],function(i,type){if(element.attr(type)){vtypes.push(type)}});if(!vtypes.length)return true;var flag=false;for(var k=0,l=vtypes.length;k<l;k++){var key=vtypes[k];var props=element.attr(key);key=key.replace(/^data-/,'');var validator=validatorMap[key];if(!validator){flag=true;continue}validator=validator instanceof Array?validator:['',validator];var feedback=element.closest(options.group);options.tips.target=feedback;var caution={tips:new Tips(options.tips),msg:msg[k]||(typeof(validator[0])==='function'?validator[0](element[0],element.val(),props):validator[0])};validator=validator[1]||function(){return true};var isInput=element.is('input','select','textarea');if(validator(element[0],element.val(),element.attr('type'),(container.is(AllAttr))?options.parent||container.parents('form')[0]||container.parent()[0]:container[0],props)){caution.tips.hide();feedback.removeClass('has-error');flag=true;continue}else{if(caution.msg){caution.tips.error(caution.msg);feedback.addClass('has-error')}if(element[0].bindEvent!==false){var evt=isInput?'onchange':'onmouseout';element[0][evt]=function(event){var e=event||window.event;var el=$(this);if(!(/mouseout$/i.test(e.type)&&el.is(e.target||e.srcElement))){validation(el[0],$.extend(true,{parent:container.is(AllAttr)?container.parents('form')[0]||container.parent()[0]:container[0]},options))}this[evt]=null}}flag=false;break}};if(!flag)errElements.push(element)});if(errElements.length){errElements.shift().focus();return false}return true};$.fn.validation=function(options){return validation(this,options)};(function(){var DISABLED='disabled';var Sync=function(target,options){var sponsor=$(target),dataForm,inject,tipElem,response={},_getOptions=function(sponsor,options){options=options||{};var _options={},opt,isSubmit=sponsor.attr('type')==='submit',dataopts=dataOptions(sponsor,'ajax');if(typeof dataopts.config==='string'){try{_options=JSON.parse(dataopts.config)||{};delete dataopts.config}catch(e){}}else if($.isPlainObject(dataopts.config)){_options=dataopts.config;delete dataopts.config}if(isSubmit)dataForm=sponsor.parents('form');if(dataForm&&dataForm[0])opt={url:dataForm[0].action,data:dataForm.serialize()+'&response_json=true',type:dataForm[0].method||'post'};else opt={url:sponsor.attr('href'),data:'response_json=true',type:sponsor.data('ajaxMethod')||'post'};_options=$.extend(true,opt,options,_options,dataopts);return _options},_defaultState=function(){sponsor[0]&&sponsor.removeClass(options.disabled)},_setCache=function(sponsor,value){sponsor.data('ajaxCache',value)},_getCache=function(sponsor){return sponsor.data('ajaxCache')},_clearCache=function(sponsor){sponsor.removeData('ajaxCache')},_progressCache=function(sponsor){var cache=_getCache(sponsor);if(!options.syncCache||!cache)return false;cache.success(response.data);return true},_jsonSuccess=function(text){if(typeof text==='string'){text=$.parseJSON(text)}response.json=text;_onSuccess(text)},_onSuccess=function(text){_defaultState();if(options.syncCache&&sponsor[0])_setCache(sponsor,options);if(response.json)_progress(text);else location.href=options.url+(/\?/.test(options.url)?'&':'?')+options.data},_progress=function(rs){if(!rs)return;if(options.progress)return options.progress.call(null,rs);var redirect=rs.redirect;var msg;if(!options.showMessage||['error','success'].every(function(v){msg=rs.message;if(!msg||!rs[v])return true;if(options.inject){if(v===options.tipHidden)_clearTip(v,msg);else _injectTip(v,msg)}else Message[v](msg,options.hideDelay,callback);return false}))callback();function callback(){if(typeof options.callback==='function')options.callback(rs,sponsor);if(redirect){if(redirect=='back')history.back();else if(redirect=='reload')location.reload();else location.href=redirect}}},_clearTip=function(){if(!inject||!tipElem)return;tipElem.remove()},_injectTip=function(cls,html){var inject=$(options.inject),position=options.position,ajaxTip=options.ajaxTip,tipCls=options.tipCls,cls=cls+tipCls,tipBox;if(!inject)return;tipBox=inject.getParent();tipElem=tipBox.getElement('.'+ajaxTip);if(tipBox&&tipElem)return tipElem.html(html);$('<div class="'+cls+' '+ajaxTip+'">'+html+'</div>').appendTo(inject,position)},_request=function(sponsor){sponsor.addClass(options.disabled)},_processScripts=function(text,scripts){if(scripts)return $.globalEval(text);return evalScripts(text,null,true)},_isCheck=function(options){options=options||{};var dataElem=dataForm||options.data;if(dataElem instanceof jQuery&&!validation(dataElem))return false;return true};if(sponsor||sponsor.length)options=_getOptions(sponsor,options);options=$.extend({disabled:DISABLED,hideDelay:3,showMessage:true,position:'before',tipCls:'-tip',ajaxTip:'ajax-tip',beforeSend:function(){if(sponsor.length){if(sponsor.hasClass(options.disabled)||!_isCheck()||_progressCache(sponsor))return;_request(sponsor)}},success:function(text,status,xhr){response.data=text;var header=xhr.getResponseHeader('Content-type');if(/application\/json/.test(header))return _jsonSuccess(text);if(options.update){if(typeof options.callback==='function')options.callback(xhr);$(options.update).html(text)}else{_onSuccess(_processScripts(text,(/(ecma|java)script/).test(header)))}},error:function(){_defaultState()}},options||{});return options};this.async=function(elem,form,options){if(elem.hasClass(DISABLED))return false;if($.isPlainObject(form)){options=form;form=null}else if(isElement(form)){if(!validation(form,options)){elem.removeClass(DISABLED);return false}if(options&&options.async===false)return}else{var sync=elem.data('ajaxCache');if(sync){return $.ajax(sync)}}options=Sync(elem,options);return $.ajax(options)};this.Event_Group={_request:{fn:async}}})();$(document).on('click',function(e){var ATTR='rel';target=$(e.target),elem=target.closest('[type=submit]');elem=elem.length?elem:target.closest('['+ATTR+']');if(!elem[0]||elem[0].nodeType===9||elem[0].disabled)return;var form=elem.parents('form'),type=elem.attr(ATTR),eventType=Event_Group[type],fn,loader;if(form[0]&&form.attr('data-async')==='false')return validation(form);if(elem[0].type==='submit'&&form[0]&&form.attr('target'))return async(elem,form,{async:false});if(elem[0].type==='submit'&&type!=='_request'){e.preventDefault();return async(elem,form)}if(eventType){fn=eventType['fn'];loader=eventType['loader'];e.preventDefault();if(elem.attr(type))return elem;if(loader){$LAB.script(loader).wait(function(){fn&&fn(elem,form)})}else{fn&&fn(elem,form)}}});
//area_select.js
;var AreaWidget=function(options){var self=this;self.options={dataUrl:'data.json',select:null,level:3,name:'area[]',initData:null};var init=function(){self.options=$.extend(self.options,options);self.box=self.options.select;$.ajax({type:"GET",url:self.options.dataUrl,dataType:"json",success:function(data){if(data){processData(data)}else{self.box.html('地区数据加载异常,请检查网络。')}}})};var processData=function(data){self.box.empty();self.data=data;self.nowList=[];self.selectList=[];self.selected=[];for(var i=0;i<self.options.level;i++){if(i==0){self.selectList[i]=$('<select></select>').appendTo(self.box).change(freshTheList)}else{self.selectList[i]=$('<select style="display:none;"></select>').appendTo(self.box).change(freshTheList)}}var tempHtml='';$.each(self.data,function(i,item){tempHtml+="<option value='"+self.data[i].id+"'>"+self.data[i].value+"</option>"});self.selectList[0].html('<option value="">-请选择-</option>'+tempHtml);self.nowList[0]=self.data;if(self.options.initData){self.input=$('<input type="hidden" name="'+self.options.name+'" value="'+self.options.initData+'">').appendTo(self.box);var initData=self.options.initData.split(',');$.each(self.selectList,function(index,item){item.val(initData[index]).trigger('change')})}else{self.input=$('<input type="hidden" name="'+self.options.name+'">').appendTo(self.box)}};var freshTheList=function(){var el=$(this),index=el.find('option:selected').index()-1,level=el.index();if(self.selected[level+1]){for(var i=level+1;i<self.options.level;i++){self.selectList[i].hide();self.selected.pop()}}if(el.val()){self.selected[level]=el.val()}else{delete self.selected[level]}self.input.val(self.selected.join(','));if(level+1<self.options.level){self.nowList[level+1]=self.nowList[level][index]['children'];if(typeof(self.nowList[level+1])==="undefined"){self.nowList[level+1]=null;self.selectList[level+1].html("<option> -- </option>");return 0}else{var tempHtml='';$.each(self.nowList[level+1],function(i,item){tempHtml+="<option value='"+self.nowList[level+1][i].id+"'>"+self.nowList[level+1][i].value+"</option>"});self.selectList[level+1].show().html('<option value="">请选择</option>'+tempHtml)}}};init()};$.fn.multiSelect=function(options){var instance=new AreaWidget($.extend({select:this},options||{}));return $(this).data('multiSelectInstance',instance)};
//main.js
;var priceControl={spec:{"decimals":2,"dec_point":".","thousands_sep":"","sign":"\uffe5"},format:function(num,force){var part;var sign=this.spec.sign||'';if(!(num||num===0)||isNaN(+num))return num;var num=parseFloat(num);if(this.spec.cur_rate){num=num*this.spec.cur_rate}num=Math.round(num*Math.pow(10,this.spec.decimals))/Math.pow(10,this.spec.decimals)+'';var p=num.indexOf('.');if(p<0){p=num.length;part=''}else{part=num.substr(p+1)}while(part.length<this.spec.decimals){part+='0'}var curr=[];while(p>0){if(p>2){p-=3;curr.unshift(num.substr(p,3))}else{curr.unshift(num.substr(0,p));break}}if(!part){this.spec.dec_point=''}if(force){sign='<span class="price-currency">'+sign+'</span>'}return sign+curr.join(this.spec.thousands_sep)+this.spec.dec_point+part},number:function(format){if(!format)return null;if(isNaN(+format)){if(format instanceof jQuery||(format.nodeName&&format.nodeType===1))format=$(format).val()||$(format).text();if(format.indexOf(this.spec.sign)==0)format=format.split(this.spec.sign)[1]}return+format},calc:function(calc,n1,n2,noformat){if(!(n1||n1===0))return null;if(!n2){n1=this.number(n1)}else{calc=!calc||calc=='add'?1:-1;var t1=1,t2=1;if(n1 instanceof Array&&n1.length){t1=n1[1];n1=n1[0]}if(n2 instanceof Array&&n2.length){t2=n2[1];n2=n2[0]}var decimals=Math.pow(10,this.spec.decimals*this.spec.decimals);n1=Math.abs(t1*decimals*this.number(n1)+calc*t2*decimals*this.number(n2))/decimals}if(!noformat)n1=this.format(n1);return n1},add:function(n1,n2,flag){return this.calc('add',n1,n2,flag)},diff:function(n1,n2,flag){return this.calc('diff',n1,n2,flag)}};function updateCartNumber(content){content=$(content||'.up-cat-number');var number=$.cookie('CARTNUMBER');$(content).text(number)}$(function(){$('body').on('click','.show-pics a',function(e){console.log('aa');e.preventDefault();var imgUrl=$(this).attr('href');if(!imgUrl){return false}else{$.dialog($('<div><div class="show-pic-dialog"><div class="show-img"><img src="'+imgUrl+'"></div></div></div>'),{width:500,modal:true,title:'查看大图'})}})});
//datepicker.js
;(function($,undefined){var $window=$(window);function UTCDate(){return new Date(Date.UTC.apply(Date,arguments))}function UTCToday(){var today=new Date();return UTCDate(today.getFullYear(),today.getMonth(),today.getDate())}function alias(method){return function(){return this[method].apply(this,arguments)}}var DateArray=(function(){var extras={get:function(i){return this.slice(i)[0]},contains:function(d){var val=d&&d.valueOf();for(var i=0,l=this.length;i<l;i++)if(this[i].valueOf()===val)return i;return-1},remove:function(i){this.splice(i,1)},replace:function(new_array){if(!new_array)return;if(!$.isArray(new_array))new_array=[new_array];this.clear();this.push.apply(this,new_array)},clear:function(){this.length=0},copy:function(){var a=new DateArray();a.replace(this);return a}};return function(){var a=[];a.push.apply(a,arguments);$.extend(a,extras);return a}})();var Datepicker=function(element,options){this.dates=new DateArray();this.viewDate=UTCToday();this.focusDate=null;this._process_options(options);this.element=$(element);this.isInline=false;this.isInput=this.element.is('input');this.component=this.element.is('.date')?this.element.find('.add-on, .input-comb-addon, .btn'):false;this.hasInput=this.component&&this.element.find('input').length;if(this.component&&this.component.length===0)this.component=false;this.picker=$(DPGlobal.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass('datepicker-inline').appendTo(this.element)}else{this.picker.addClass('datepicker-dropdown dropdown-menu')}if(this.o.rtl){this.picker.addClass('datepicker-rtl')}this.viewMode=this.o.startView;if(this.o.calendarWeeks)this.picker.find('tfoot th.today').attr('colspan',function(i,val){return parseInt(val)+1});this._allow_update=false;this.setStartDate(this._o.min);this.setEndDate(this._o.max);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};Datepicker.prototype={constructor:Datepicker,_process_options:function(opts){this._o=$.extend({},this._o,opts);var o=this.o=$.extend({},this._o);var lang=o.language;if(!dates[lang]){lang=lang.split('-')[0];if(!dates[lang])lang=defaults.language}o.language=lang;switch(o.startView){case 2:case'decade':o.startView=2;break;case 1:case'year':o.startView=1;break;default:o.startView=0}switch(o.minViewMode){case 1:case'months':o.minViewMode=1;break;case 2:case'years':o.minViewMode=2;break;default:o.minViewMode=0}o.startView=Math.max(o.startView,o.minViewMode);if(o.multidate!==true){o.multidate=Number(o.multidate)||false;if(o.multidate!==false)o.multidate=Math.max(0,o.multidate);else o.multidate=1}o.multidateSeparator=String(o.multidateSeparator);o.weekStart%=7;o.weekEnd=((o.weekStart+6)%7);var format=DPGlobal.parseFormat(o.format);if(o.min!==-Infinity){if(!!o.min){if(o.min instanceof Date)o.min=this._local_to_utc(this._zero_time(o.min));else o.min=DPGlobal.parseDate(o.min,format,o.language)}else{o.min=-Infinity}}if(o.max!==Infinity){if(!!o.max){if(o.max instanceof Date)o.max=this._local_to_utc(this._zero_time(o.max));else o.max=DPGlobal.parseDate(o.max,format,o.language)}else{o.max=Infinity}}o.daysOfWeekDisabled=o.daysOfWeekDisabled||[];if(!$.isArray(o.daysOfWeekDisabled))o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/);o.daysOfWeekDisabled=$.map(o.daysOfWeekDisabled,function(d){return parseInt(d,10)});var plc=String(o.orientation).toLowerCase().split(/\s+/g),_plc=o.orientation.toLowerCase();plc=$.grep(plc,function(word){return(/^auto|left|right|top|bottom$/).test(word)});o.orientation={x:'auto',y:'auto'};if(!_plc||_plc==='auto');else if(plc.length===1){switch(plc[0]){case'top':case'bottom':o.orientation.y=plc[0];break;case'left':case'right':o.orientation.x=plc[0];break}}else{_plc=$.grep(plc,function(word){return(/^left|right$/).test(word)});o.orientation.x=_plc[0]||'auto';_plc=$.grep(plc,function(word){return(/^top|bottom$/).test(word)});o.orientation.y=_plc[0]||'auto'}},_events:[],_secondaryEvents:[],_applyEvents:function(evs){for(var i=0,el,ch,ev;i<evs.length;i++){el=evs[i][0];if(evs[i].length===2){ch=undefined;ev=evs[i][1]}else if(evs[i].length===3){ch=evs[i][1];ev=evs[i][2]}el.on(ev,ch)}},_unapplyEvents:function(evs){for(var i=0,el,ev,ch;i<evs.length;i++){el=evs[i][0];if(evs[i].length===2){ch=undefined;ev=evs[i][1]}else if(evs[i].length===3){ch=evs[i][1];ev=evs[i][2]}el.off(ev,ch)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:$.proxy(this.show,this),keyup:$.proxy(function(e){if($.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1)this.update()},this),keydown:$.proxy(this.keydown,this)}]]}else if(this.component&&this.hasInput){this._events=[[this.element.find('input'),{focus:$.proxy(this.show,this),keyup:$.proxy(function(e){if($.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1)this.update()},this),keydown:$.proxy(this.keydown,this)}],[this.component,{click:$.proxy(this.show,this)}]]}else if(this.element.is('div')){this.isInline=true}else{this._events=[[this.element,{click:$.proxy(this.show,this)}]]}this._events.push([this.element,'*',{blur:$.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:$.proxy(function(e){this._focused_from=e.target},this)}]);this._secondaryEvents=[[this.picker,{click:$.proxy(this.click,this)}],[$(window),{resize:$.proxy(this.place,this)}],[$(document),{'mousedown touchstart':$.proxy(function(e){if(!(this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length)){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(event,altdate){var date=altdate||this.dates.get(-1),local_date=this._utc_to_local(date);this.element.trigger({type:event,date:local_date,dates:$.map(this.dates,this._utc_to_local),format:$.proxy(function(ix,format){if(arguments.length===0){ix=this.dates.length-1;format=this.o.format}else if(typeof ix==='string'){format=ix;ix=this.dates.length-1}format=format||this.o.format;var date=this.dates.get(ix);return DPGlobal.formatDate(date,format,this.o.language)},this)})},show:function(){if(!this.isInline)this.picker.appendTo('body');this.picker.show();this.place();this._attachSecondaryEvents();this._trigger('show')},hide:function(){if(this.isInline)return;if(!this.picker.is(':visible'))return;this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find('input').val()))this.setValue();this._trigger('hide')},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},_utc_to_local:function(utc){return utc&&new Date(utc.getTime()+(utc.getTimezoneOffset()*60000))},_local_to_utc:function(local){return local&&new Date(local.getTime()-(local.getTimezoneOffset()*60000))},_zero_time:function(local){return local&&new Date(local.getFullYear(),local.getMonth(),local.getDate())},_zero_utc_time:function(utc){return utc&&new Date(Date.UTC(utc.getUTCFullYear(),utc.getUTCMonth(),utc.getUTCDate()))},getDates:function(){return $.map(this.dates,this._utc_to_local)},getUTCDates:function(){return $.map(this.dates,function(d){return new Date(d)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,args);this._trigger('changeDate');this.setValue()},setUTCDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,$.map(args,this._utc_to_local));this._trigger('changeDate');this.setValue()},setDate:alias('setDates'),setUTCDate:alias('setUTCDates'),setValue:function(){var formatted=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find('input').val(formatted).change()}}else{this.element.val(formatted).change()}},getFormattedDate:function(format){if(format===undefined)format=this.o.format;var lang=this.o.language;return $.map(this.dates,function(d){return DPGlobal.formatDate(d,format,lang)}).join(this.o.multidateSeparator)},setStartDate:function(min){this._process_options({min:min});this.update();this.updateNavArrows()},setEndDate:function(max){this._process_options({max:max});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(daysOfWeekDisabled){this._process_options({daysOfWeekDisabled:daysOfWeekDisabled});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return;var calendarWidth=this.picker.outerWidth(),calendarHeight=this.picker.outerHeight(),visualPadding=10,windowWidth=$window.width(),windowHeight=$window.height(),scrollTop=$window.scrollTop();var zIndex=parseInt(this.element.parents().filter(function(){return $(this).css('z-index')!=='auto'}).first().css('z-index'))+10;var offset=this.component?this.component.parent().offset():this.element.offset();var height=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var width=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var left=offset.left,top=offset.top;this.picker.removeClass('datepicker-orient-top datepicker-orient-bottom '+'datepicker-orient-right datepicker-orient-left');if(this.o.orientation.x!=='auto'){this.picker.addClass('datepicker-orient-'+this.o.orientation.x);if(this.o.orientation.x==='right')left-=calendarWidth-width}else{this.picker.addClass('datepicker-orient-left');if(offset.left<0)left-=offset.left-visualPadding;else if(offset.left+calendarWidth>windowWidth)left=windowWidth-calendarWidth-visualPadding}var yorient=this.o.orientation.y,top_overflow,bottom_overflow;if(yorient==='auto'){top_overflow=-scrollTop+offset.top-calendarHeight;bottom_overflow=scrollTop+windowHeight-(offset.top+height+calendarHeight);if(bottom_overflow>=0||top_overflow<0){yorient='top'}else if(top_overflow>=0){yorient='bottom'}}this.picker.addClass('datepicker-orient-'+yorient);if(yorient==='top')top+=height;else top-=calendarHeight+parseInt(this.picker.css('padding-top'));this.picker.css({top:top,left:left,zIndex:zIndex})},_allow_update:true,update:function(){if(!this._allow_update)return;var oldDates=this.dates.copy(),dates=[],fromArgs=false;if(arguments.length){$.each(arguments,$.proxy(function(i,date){if(date instanceof Date)date=this._local_to_utc(date);dates.push(date)},this));fromArgs=true}else{dates=this.isInput?this.element.val():this.element.data('date')||this.element.find('input').val();if(dates&&this.o.multidate)dates=dates.split(this.o.multidateSeparator);else dates=[dates];delete this.element.data().date}dates=$.map(dates,$.proxy(function(date){return DPGlobal.parseDate(date,this.o.format,this.o.language)},this));dates=$.grep(dates,$.proxy(function(date){return(date<this.o.min||date>this.o.max||!date)},this),true);this.dates.replace(dates);if(this.dates.length)this.viewDate=new Date(this.dates.get(-1));else if(this.viewDate<this.o.min)this.viewDate=new Date(this.o.min);else if(this.viewDate>this.o.max)this.viewDate=new Date(this.o.max);if(fromArgs){this.setValue()}else if(dates.length){if(String(oldDates)!==String(this.dates))this._trigger('changeDate')}if(!this.dates.length&&oldDates.length)this._trigger('clearDate');this.fill()},fillDow:function(){var dowCnt=this.o.weekStart,html='<tr>';if(this.o.calendarWeeks){var cell='<th class="cw">&nbsp;</th>';html+=cell;this.picker.find('.datepicker-days thead tr:first-child').prepend(cell)}while(dowCnt<this.o.weekStart+7){html+='<th class="dow">'+dates[this.o.language].daysMin[(dowCnt++)%7]+'</th>'}html+='</tr>';this.picker.find('.datepicker-days thead').append(html)},fillMonths:function(){var html='',i=0;while(i<12){html+='<span class="month">'+dates[this.o.language].monthsShort[i++]+'</span>'}this.picker.find('.datepicker-months td').html(html)},setRange:function(range){if(!range||!range.length)delete this.range;else this.range=$.map(range,function(d){return d.valueOf()});this.fill()},getClassNames:function(date){var cls=[],year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),today=new Date();if(date.getUTCFullYear()<year||(date.getUTCFullYear()===year&&date.getUTCMonth()<month)){cls.push('old')}else if(date.getUTCFullYear()>year||(date.getUTCFullYear()===year&&date.getUTCMonth()>month)){cls.push('new')}if(this.focusDate&&date.valueOf()===this.focusDate.valueOf())cls.push('focused');if(this.o.todayHighlight&&date.getUTCFullYear()===today.getFullYear()&&date.getUTCMonth()===today.getMonth()&&date.getUTCDate()===today.getDate()){cls.push('today')}if(this.dates.contains(date)!==-1)cls.push('active');if(date.valueOf()<this.o.min||date.valueOf()>this.o.max||$.inArray(date.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){cls.push('disabled')}if(this.range){if(date>this.range[0]&&date<this.range[this.range.length-1]){cls.push('range')}if($.inArray(date.valueOf(),this.range)!==-1){cls.push('selected')}}return cls},fill:function(){var d=new Date(this.viewDate),year=d.getUTCFullYear(),yeartext=year+dates[this.o.language].year,month=d.getUTCMonth(),startYear=this.o.min!==-Infinity?this.o.min.getUTCFullYear():-Infinity,startMonth=this.o.min!==-Infinity?this.o.min.getUTCMonth():-Infinity,endYear=this.o.max!==Infinity?this.o.max.getUTCFullYear():Infinity,endMonth=this.o.max!==Infinity?this.o.max.getUTCMonth():Infinity,todaytxt=dates[this.o.language].today||'',cleartxt=dates[this.o.language].clear||'',tooltip;this.picker.find('.datepicker-days thead th.datepicker-switch').text(yeartext+dates[this.o.language].months[month]);this.picker.find('tfoot th.today').text(todaytxt).toggle(this.o.todayBtn!==false);this.picker.find('tfoot th.clear').text(cleartxt).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var prevMonth=UTCDate(year,month-1,28),day=DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(),prevMonth.getUTCMonth());prevMonth.setUTCDate(day);prevMonth.setUTCDate(day-(prevMonth.getUTCDay()-this.o.weekStart+7)%7);var nextMonth=new Date(prevMonth);nextMonth.setUTCDate(nextMonth.getUTCDate()+42);nextMonth=nextMonth.valueOf();var html=[];var clsName;while(prevMonth.valueOf()<nextMonth){if(prevMonth.getUTCDay()===this.o.weekStart){html.push('<tr>');if(this.o.calendarWeeks){var ws=new Date(+prevMonth+(this.o.weekStart-prevMonth.getUTCDay()-7)%7*864e5),th=new Date(Number(ws)+(7+4-ws.getUTCDay())%7*864e5),yth=new Date(Number(yth=UTCDate(th.getUTCFullYear(),0,1))+(7+4-yth.getUTCDay())%7*864e5),calWeek=(th-yth)/864e5/7+1;html.push('<td class="cw">'+calWeek+'</td>')}}clsName=this.getClassNames(prevMonth);clsName.push('day');if(this.o.beforeShowDay!==$.noop){var before=this.o.beforeShowDay(this._utc_to_local(prevMonth));if(before===undefined)before={};else if(typeof(before)==='boolean')before={enabled:before};else if(typeof(before)==='string')before={classes:before};if(before.enabled===false)clsName.push('disabled');if(before.classes)clsName=clsName.concat(before.classes.split(/\s+/));if(before.tooltip)tooltip=before.tooltip}clsName=$.unique(clsName);html.push('<td class="'+clsName.join(' ')+'"'+(tooltip?' title="'+tooltip+'"':'')+'>'+prevMonth.getUTCDate()+'</td>');if(prevMonth.getUTCDay()===this.o.weekEnd){html.push('</tr>')}prevMonth.setUTCDate(prevMonth.getUTCDate()+1)}this.picker.find('.datepicker-days tbody').empty().append(html.join(''));var months=this.picker.find('.datepicker-months').find('th:eq(1)').text(year).end().find('span').removeClass('active');$.each(this.dates,function(i,d){if(d.getUTCFullYear()===year)months.eq(d.getUTCMonth()).addClass('active')});if(year<startYear||year>endYear){months.addClass('disabled')}if(year===startYear){months.slice(0,startMonth).addClass('disabled')}if(year===endYear){months.slice(endMonth+1).addClass('disabled')}html='';year=parseInt(year/10,10)*10;var yearCont=this.picker.find('.datepicker-years').find('th:eq(1)').text(year+'-'+(year+9)).end().find('td');year-=1;var years=$.map(this.dates,function(d){return d.getUTCFullYear()}),classes;for(var i=-1;i<11;i++){classes=['year'];if(i===-1)classes.push('old');else if(i===10)classes.push('new');if($.inArray(year,years)!==-1)classes.push('active');if(year<startYear||year>endYear)classes.push('disabled');html+='<span class="'+classes.join(' ')+'">'+year+'</span>';year+=1}yearCont.html(html)},updateNavArrows:function(){if(!this._allow_update)return;var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth();switch(this.viewMode){case 0:if(this.o.min!==-Infinity&&year<=this.o.min.getUTCFullYear()&&month<=this.o.min.getUTCMonth()){this.picker.find('.prev').css({visibility:'hidden'})}else{this.picker.find('.prev').css({visibility:'visible'})}if(this.o.max!==Infinity&&year>=this.o.max.getUTCFullYear()&&month>=this.o.max.getUTCMonth()){this.picker.find('.next').css({visibility:'hidden'})}else{this.picker.find('.next').css({visibility:'visible'})}break;case 1:case 2:if(this.o.min!==-Infinity&&year<=this.o.min.getUTCFullYear()){this.picker.find('.prev').css({visibility:'hidden'})}else{this.picker.find('.prev').css({visibility:'visible'})}if(this.o.max!==Infinity&&year>=this.o.max.getUTCFullYear()){this.picker.find('.next').css({visibility:'hidden'})}else{this.picker.find('.next').css({visibility:'visible'})}break}},click:function(e){e.preventDefault();var target=$(e.target).closest('span, td, th'),year,month,day;if(target.length===1){switch(target[0].nodeName.toLowerCase()){case'th':switch(target[0].className){case'datepicker-switch':this.showMode(1);break;case'prev':case'next':var dir=DPGlobal.modes[this.viewMode].navStep*(target[0].className==='prev'?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,dir);this._trigger('changeMonth',this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,dir);if(this.viewMode===1)this._trigger('changeYear',this.viewDate);break}this.fill();break;case'today':var date=new Date();date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);this.showMode(-2);var which=this.o.todayBtn==='linked'?null:'view';this._setDate(date,which);break;case'clear':var element;if(this.isInput)element=this.element;else if(this.component)element=this.element.find('input');if(element)element.val("").change();this.update();this._trigger('changeDate');if(this.o.autoclose)this.hide();break}break;case'span':if(!target.is('.disabled')){this.viewDate.setUTCDate(1);if(target.is('.month')){day=1;month=target.parent().find('span').index(target);year=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(month);this._trigger('changeMonth',this.viewDate);if(this.o.minViewMode===1){this._setDate(UTCDate(year,month,day))}}else{day=1;month=0;year=parseInt(target.text(),10)||0;this.viewDate.setUTCFullYear(year);this._trigger('changeYear',this.viewDate);if(this.o.minViewMode===2){this._setDate(UTCDate(year,month,day))}}this.showMode(-1);this.fill()}break;case'td':if(target.is('.day')&&!target.is('.disabled')){day=parseInt(target.text(),10)||1;year=this.viewDate.getUTCFullYear();month=this.viewDate.getUTCMonth();if(target.is('.old')){if(month===0){month=11;year-=1}else{month-=1}}else if(target.is('.new')){if(month===11){month=0;year+=1}else{month+=1}}this._setDate(UTCDate(year,month,day))}break}}if(this.picker.is(':visible')&&this._focused_from){$(this._focused_from).focus()}delete this._focused_from},_toggle_multidate:function(date){var ix=this.dates.contains(date);if(!date){this.dates.clear()}else if(ix!==-1){this.dates.remove(ix)}else{this.dates.push(date)}if(typeof this.o.multidate==='number')while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(date,which){if(!which||which==='date')this._toggle_multidate(date&&new Date(date));if(!which||which==='view')this.viewDate=date&&new Date(date);this.fill();this.setValue();this._trigger('changeDate');var element;if(this.isInput){element=this.element}else if(this.component){element=this.element.find('input')}if(element){element.change()}if(this.o.autoclose&&(!which||which==='date')){this.hide()}},moveMonth:function(date,dir){if(!date)return undefined;if(!dir)return date;var new_date=new Date(date.valueOf()),day=new_date.getUTCDate(),month=new_date.getUTCMonth(),mag=Math.abs(dir),new_month,test;dir=dir>0?1:-1;if(mag===1){test=dir===-1?function(){return new_date.getUTCMonth()===month}:function(){return new_date.getUTCMonth()!==new_month};new_month=month+dir;new_date.setUTCMonth(new_month);if(new_month<0||new_month>11)new_month=(new_month+12)%12}else{for(var i=0;i<mag;i++)new_date=this.moveMonth(new_date,dir);new_month=new_date.getUTCMonth();new_date.setUTCDate(day);test=function(){return new_month!==new_date.getUTCMonth()}}while(test()){new_date.setUTCDate(--day);new_date.setUTCMonth(new_month)}return new_date},moveYear:function(date,dir){return this.moveMonth(date,dir*12)},dateWithinRange:function(date){return date>=this.o.min&&date<=this.o.max},keydown:function(e){if(this.picker.is(':not(:visible)')){if(e.keyCode===27)this.show();return}var dateChanged=false,dir,newDate,newViewDate,focusDate=this.focusDate||this.viewDate;switch(e.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill()}else this.hide();e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;dir=e.keyCode===37?-1:1;if(e.ctrlKey){newDate=this.moveYear(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveYear(focusDate,dir);this._trigger('changeYear',this.viewDate)}else if(e.shiftKey){newDate=this.moveMonth(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveMonth(focusDate,dir);this._trigger('changeMonth',this.viewDate)}else{newDate=new Date(this.dates.get(-1)||UTCToday());newDate.setUTCDate(newDate.getUTCDate()+dir);newViewDate=new Date(focusDate);newViewDate.setUTCDate(focusDate.getUTCDate()+dir)}if(this.dateWithinRange(newDate)){this.focusDate=this.viewDate=newViewDate;this.setValue();this.fill();e.preventDefault()}break;case 38:case 40:if(!this.o.keyboardNavigation)break;dir=e.keyCode===38?-1:1;if(e.ctrlKey){newDate=this.moveYear(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveYear(focusDate,dir);this._trigger('changeYear',this.viewDate)}else if(e.shiftKey){newDate=this.moveMonth(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveMonth(focusDate,dir);this._trigger('changeMonth',this.viewDate)}else{newDate=new Date(this.dates.get(-1)||UTCToday());newDate.setUTCDate(newDate.getUTCDate()+dir*7);newViewDate=new Date(focusDate);newViewDate.setUTCDate(focusDate.getUTCDate()+dir*7)}if(this.dateWithinRange(newDate)){this.focusDate=this.viewDate=newViewDate;this.setValue();this.fill();e.preventDefault()}break;case 32:break;case 13:focusDate=this.focusDate||this.dates.get(-1)||this.viewDate;this._toggle_multidate(focusDate);dateChanged=true;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(':visible')){e.preventDefault();if(this.o.autoclose)this.hide()}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide();break}if(dateChanged){if(this.dates.length)this._trigger('changeDate');else this._trigger('clearDate');var element;if(this.isInput){element=this.element}else if(this.component){element=this.element.find('input')}if(element){element.change()}}},showMode:function(dir){if(dir){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+dir))}this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).css('display','block');this.updateNavArrows()}};var DateRangePicker=function(element,options){this.element=$(element);this.inputs=$.map(options.inputs,function(i){return i.jquery?i[0]:i});delete options.inputs;$(this.inputs).datepicker(options).bind('changeDate',$.proxy(this.dateUpdated,this));this.pickers=$.map(this.inputs,function(i){return $(i).data('datepicker')});this.updateDates()};DateRangePicker.prototype={updateDates:function(){this.dates=$.map(this.pickers,function(i){return i.getUTCDate()});this.updateRanges()},updateRanges:function(){var range=$.map(this.dates,function(d){return d.valueOf()});$.each(this.pickers,function(i,p){p.setRange(range)})},dateUpdated:function(e){if(this.updating)return;this.updating=true;var dp=$(e.target).data('datepicker'),new_date=dp.getUTCDate(),i=$.inArray(e.target,this.inputs),l=this.inputs.length;if(i===-1)return;$.each(this.pickers,function(i,p){if(!p.getUTCDate())p.setUTCDate(new_date)});if(new_date<this.dates[i]){while(i>=0&&new_date<this.dates[i]){this.pickers[i--].setUTCDate(new_date)}}else if(new_date>this.dates[i]){while(i<l&&new_date>this.dates[i]){this.pickers[i++].setUTCDate(new_date)}}this.updateDates();delete this.updating},remove:function(){$.map(this.pickers,function(p){p.remove()});delete this.element.data().datepicker}};function opts_from_el(el,prefix){var data=$(el).data(),out={},inkey,replace=new RegExp('^'+prefix.toLowerCase()+'([A-Z])');prefix=new RegExp('^'+prefix.toLowerCase());function re_lower(_,a){return a.toLowerCase()}for(var key in data){if(prefix.test(key)){inkey=key.replace(replace,re_lower);out[inkey]=data[key]}}return out}function opts_from_locale(lang){var out={};if(!dates[lang]){lang=lang.split('-')[0];if(!dates[lang])return}var d=dates[lang];$.each(locale_opts,function(i,k){if(k in d)out[k]=d[k]});return out}var old=$.fn.datepicker;$.fn.datepicker=function(option){var args=Array.apply(null,arguments);args.shift();var internal_return;this.each(function(){var $this=$(this),data=$this.data('datepicker'),dateInput;options=typeof option==='object'&&option;if($this.is('[type=date]')){dateInput=$this}else if($this.find('[type=date]').length){dateInput=$this.find('[type=date]')}if(dateInput.length){if(dateInput.attr('min')){$this.attr('data-date-min',dateInput.attr('min'))}if(dateInput.attr('max')){$this.attr('data-date-max',dateInput.attr('max'))}}if(!data){var elopts=opts_from_el(this,'date'),xopts=$.extend({},defaults,elopts,options),locopts=opts_from_locale(xopts.language),opts=$.extend({},defaults,locopts,elopts,options);if($this.is('.input-daterange')||opts.inputs){var ropts={inputs:opts.inputs||$this.find('input').toArray()};$this.data('datepicker',(data=new DateRangePicker(this,$.extend(opts,ropts))))}else{$this.data('datepicker',(data=new Datepicker(this,opts)))}}if(typeof option==='string'&&typeof data[option]==='function'){internal_return=data[option].apply(data,args);if(internal_return!==undefined)return false}});if(internal_return!==undefined)return internal_return;else return this};var defaults=$.fn.datepicker.defaults={autoclose:true,beforeShowDay:$.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],forceParse:true,format:'yyyy-mm-dd',keyboardNavigation:true,language:'zh-CN',max:Infinity,min:-Infinity,minViewMode:0,multidate:false,multidateSeparator:',',orientation:"auto",rtl:false,startView:0,todayBtn:false,todayHighlight:true,weekStart:0};var locale_opts=$.fn.datepicker.locale_opts=['format','rtl','weekStart'];$.fn.datepicker.Constructor=Datepicker;var dates=$.fn.datepicker.dates={'zh-CN':{year:"年",months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],today:"今日",clear:"清除",format:"yyyy-mm-dd",weekStart:1}};var DPGlobal={modes:[{clsName:'days',navFnc:'Month',navStep:1},{clsName:'months',navFnc:'FullYear',navStep:1},{clsName:'years',navFnc:'FullYear',navStep:10}],isLeapYear:function(year){return(((year%4===0)&&(year%100!==0))||(year%400===0))},getDaysInMonth:function(year,month){return[31,(DPGlobal.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(format){var separators=format.replace(this.validParts,'\0').split('\0'),parts=format.match(this.validParts);if(!separators||!separators.length||!parts||parts.length===0){throw new Error("Invalid date format.");}return{separators:separators,parts:parts}},parseDate:function(date,format,language){if(!date)return undefined;if(date instanceof Date)return date;if(typeof format==='string')format=DPGlobal.parseFormat(format);var part_re=/([\-+]\d+)([dmwy])/,parts=date.match(/([\-+]\d+)([dmwy])/g),part,dir,i;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(date)){date=new Date();for(i=0;i<parts.length;i++){part=part_re.exec(parts[i]);dir=parseInt(part[1]);switch(part[2]){case'd':date.setUTCDate(date.getUTCDate()+dir);break;case'm':date=Datepicker.prototype.moveMonth.call(Datepicker.prototype,date,dir);break;case'w':date.setUTCDate(date.getUTCDate()+dir*7);break;case'y':date=Datepicker.prototype.moveYear.call(Datepicker.prototype,date,dir);break}}return UTCDate(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),0,0,0)}parts=date&&date.match(this.nonpunctuation)||[];date=new Date();var parsed={},setters_order=['yyyy','yy','M','MM','m','mm','d','dd'],setters_map={yyyy:function(d,v){return d.setUTCFullYear(v)},yy:function(d,v){return d.setUTCFullYear(2000+v)},m:function(d,v){if(isNaN(d))return d;v-=1;while(v<0)v+=12;v%=12;d.setUTCMonth(v);while(d.getUTCMonth()!==v)d.setUTCDate(d.getUTCDate()-1);return d},d:function(d,v){return d.setUTCDate(v)}},val,filtered;setters_map['M']=setters_map['MM']=setters_map['mm']=setters_map['m'];setters_map['dd']=setters_map['d'];date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);var fparts=format.parts.slice();if(parts.length!==fparts.length){fparts=$(fparts).filter(function(i,p){return $.inArray(p,setters_order)!==-1}).toArray()}function match_part(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m===p}if(parts.length===fparts.length){var cnt;for(i=0,cnt=fparts.length;i<cnt;i++){val=parseInt(parts[i],10);part=fparts[i];if(isNaN(val)){switch(part){case'MM':filtered=$(dates[language].months).filter(match_part);val=$.inArray(filtered[0],dates[language].months)+1;break;case'M':filtered=$(dates[language].monthsShort).filter(match_part);val=$.inArray(filtered[0],dates[language].monthsShort)+1;break}}parsed[part]=val}var _date,s;for(i=0;i<setters_order.length;i++){s=setters_order[i];if(s in parsed&&!isNaN(parsed[s])){_date=new Date(date);setters_map[s](_date,parsed[s]);if(!isNaN(_date))date=_date}}}return date},formatDate:function(date,format,language){if(!date)return'';if(typeof format==='string')format=DPGlobal.parseFormat(format);var val={d:date.getUTCDate(),D:dates[language].daysShort[date.getUTCDay()],DD:dates[language].days[date.getUTCDay()],m:date.getUTCMonth()+1,M:dates[language].monthsShort[date.getUTCMonth()],MM:dates[language].months[date.getUTCMonth()],yy:date.getUTCFullYear().toString().substring(2),yyyy:date.getUTCFullYear()};val.dd=(val.d<10?'0':'')+val.d;val.mm=(val.m<10?'0':'')+val.m;date=[];var seps=$.extend([],format.separators);for(var i=0,cnt=format.parts.length;i<=cnt;i++){if(seps.length)date.push(seps.shift());date.push(val[format.parts[i]])}return date.join('')},headTemplate:'<thead>'+'<tr>'+'<th class="prev">&laquo;</th>'+'<th colspan="5" class="datepicker-switch"></th>'+'<th class="next">&raquo;</th>'+'</tr>'+'</thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot>'+'<tr>'+'<th colspan="7" class="today"></th>'+'</tr>'+'<tr>'+'<th colspan="7" class="clear"></th>'+'</tr>'+'</tfoot>'};DPGlobal.template='<div class="datepicker">'+'<div class="datepicker-days">'+'<table class=" table-condensed">'+DPGlobal.headTemplate+'<tbody></tbody>'+DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-months">'+'<table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-years">'+'<table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+'</table>'+'</div>'+'</div>';$.fn.datepicker.DPGlobal=DPGlobal;$.fn.datepicker.noConflict=function(){$.fn.datepicker=old;return this};$(document).on('focus.datepicker.data-api click.datepicker.data-api','[data-toggle="datepicker"]',function(e){var $this=$(this);if($this.data('datepicker'))return;e.preventDefault();$this.datepicker('show')});$(function(){$('[data-toggle="datepicker-inline"]').datepicker()})}(window.jQuery));

/*! jQuery Validation Plugin - v1.15.0 - 2/24/2016
 * http://jqueryvalidation.org/
 * Copyright (c) 2016 Jörn Zaefferer; Licensed MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return void(b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.on("click.validate",":submit",function(b){c.settings.submitHandler&&(c.submitButton=b.target),a(this).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(this).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.on("submit.validate",function(b){function d(){var d,e;return c.settings.submitHandler?(c.submitButton&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),e=c.settings.submitHandler.call(c,c.currentForm,b),c.submitButton&&d.remove(),void 0!==e?e:!1):!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){var b,c,d;return a(this[0]).is("form")?b=this.validate().form():(d=[],b=!0,c=a(this[0].form).validate(),this.each(function(){b=c.element(this)&&b,b||(d=d.concat(c.errorList))}),c.errorList=d),b},rules:function(b,c){if(this.length){var d,e,f,g,h,i,j=this[0];if(b)switch(d=a.data(j.form,"validator").settings,e=d.rules,f=a.validator.staticRules(j),b){case"add":a.extend(f,a.validator.normalizeRule(c)),delete f.messages,e[j.name]=f,c.messages&&(d.messages[j.name]=a.extend(d.messages[j.name],c.messages));break;case"remove":return c?(i={},a.each(c.split(/\s/),function(b,c){i[c]=f[c],delete f[c],"required"===c&&a(j).removeAttr("aria-required")}),i):(delete e[j.name],f)}return g=a.validator.normalizeRules(a.extend({},a.validator.classRules(j),a.validator.attributeRules(j),a.validator.dataRules(j),a.validator.staticRules(j)),j),g.required&&(h=g.required,delete g.required,g=a.extend({required:h},g),a(j).attr("aria-required","true")),g.remote&&(h=g.remote,delete g.remote,g=a.extend(g,{remote:h})),g}}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){var c=a(b).val();return null!==c&&!!a.trim(""+c)},unchecked:function(b){return!a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:void 0===c?b:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(b,c){var d=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===c.which&&""===this.elementValue(b)||-1!==a.inArray(c.keyCode,d)||(b.name in this.submitted||b.name in this.invalid)&&this.element(b)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}."),step:a.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this.form,"validator"),d="on"+b.type.replace(/^validate/,""),e=c.settings;e[d]&&!a(this).is(e.ignore)&&e[d].call(c,this,b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c,d=this.groups={};a.each(this.settings.groups,function(b,c){"string"==typeof c&&(c=c.split(/\s/)),a.each(c,function(a,c){d[c]=b})}),c=this.settings.rules,a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",b).on("click.validate","select, option, [type='radio'], [type='checkbox']",b),this.settings.invalidHandler&&a(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),a(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var c,d,e=this.clean(b),f=this.validationTargetFor(e),g=this,h=!0;return void 0===f?delete this.invalid[e.name]:(this.prepareElement(f),this.currentElements=a(f),d=this.groups[f.name],d&&a.each(this.groups,function(a,b){b===d&&a!==f.name&&(e=g.validationTargetFor(g.clean(g.findByName(a))),e&&e.name in g.invalid&&(g.currentElements.push(e),h=h&&g.check(e)))}),c=this.check(f)!==!1,h=h&&c,c?this.invalid[f.name]=!1:this.invalid[f.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),a(b).attr("aria-invalid",!c)),h},showErrors:function(b){if(b){var c=this;a.extend(this.errorMap,b),this.errorList=a.map(this.errorMap,function(a,b){return{message:a,element:c.findByName(b)[0]}}),this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var b=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(b)},resetElements:function(a){var b;if(this.settings.unhighlight)for(b=0;a[b];b++)this.settings.unhighlight.call(this,a[b],this.settings.errorClass,""),this.findByName(a[b].name).removeClass(this.settings.validClass);else a.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)a[b]&&c++;return c},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text(""),this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var d=this.name||a(this).attr("name");return!d&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=a(this).closest("form")[0]),d in c||!b.objectLength(a(this).rules())?!1:(c[d]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([])},reset:function(){this.resetInternals(),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},elementValue:function(b){var c,d,e=a(b),f=b.type;return"radio"===f||"checkbox"===f?this.findByName(b.name).filter(":checked").val():"number"===f&&"undefined"!=typeof b.validity?b.validity.badInput?"NaN":e.val():(c=b.hasAttribute("contenteditable")?e.text():e.val(),"file"===f?"C:\\fakepath\\"===c.substr(0,12)?c.substr(12):(d=c.lastIndexOf("/"),d>=0?c.substr(d+1):(d=c.lastIndexOf("\\"),d>=0?c.substr(d+1):c)):"string"==typeof c?c.replace(/\r/g,""):c)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d,e,f=a(b).rules(),g=a.map(f,function(a,b){return b}).length,h=!1,i=this.elementValue(b);if("function"==typeof f.normalizer){if(i=f.normalizer.call(b,i),"string"!=typeof i)throw new TypeError("The normalizer should return a string value.");delete f.normalizer}for(d in f){e={method:d,parameters:f[d]};try{if(c=a.validator.methods[d].call(this,i,b,e.parameters),"dependency-mismatch"===c&&1===g){h=!0;continue}if(h=!1,"pending"===c)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!c)return this.formatAndAdd(b,e),!1}catch(j){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+e.method+"' method.",j),j instanceof TypeError&&(j.message+=".  Exception occurred when checking element "+b.id+", check the '"+e.method+"' method."),j}}if(!h)return this.objectLength(f)&&this.successList.push(b),!0},customDataMessage:function(b,c){return a(b).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||a(b).data("msg")},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){var d=this.findDefined(this.customMessage(b.name,c.method),this.customDataMessage(b,c.method),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c.method],"<strong>Warning: No message defined for "+b.name+"</strong>"),e=/\$?\{(\d+)\}/g;return"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),d},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b);this.errorList.push({message:c,element:a,method:b.method}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b,c;for(a=0;this.errorList[a];a++)c=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d,e,f,g,h=this.errorsFor(b),i=this.idOrName(b),j=a(b).attr("aria-describedby");h.length?(h.removeClass(this.settings.validClass).addClass(this.settings.errorClass),h.html(c)):(h=a("<"+this.settings.errorElement+">").attr("id",i+"-error").addClass(this.settings.errorClass).html(c||""),d=h,this.settings.wrapper&&(d=h.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(d):this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b),h.is("label")?h.attr("for",i):0===h.parents("label[for='"+this.escapeCssMeta(i)+"']").length&&(f=h.attr("id"),j?j.match(new RegExp("\\b"+this.escapeCssMeta(f)+"\\b"))||(j+=" "+f):j=f,a(b).attr("aria-describedby",j),e=this.groups[b.name],e&&(g=this,a.each(g.groups,function(b,c){c===e&&a("[name='"+g.escapeCssMeta(b)+"']",g.currentForm).attr("aria-describedby",h.attr("id"))})))),!c&&this.settings.success&&(h.text(""),"string"==typeof this.settings.success?h.addClass(this.settings.success):this.settings.success(h,b)),this.toShow=this.toShow.add(h)},errorsFor:function(b){var c=this.escapeCssMeta(this.idOrName(b)),d=a(b).attr("aria-describedby"),e="label[for='"+c+"'], label[for='"+c+"'] *";return d&&(e=e+", #"+this.escapeCssMeta(d).replace(/\s+/g,", #")),this.errors().filter(e)},escapeCssMeta:function(a){return a.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(b){return this.checkable(b)&&(b=this.findByName(b.name)),a(b).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+this.escapeCssMeta(b)+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||(this.pendingRequest++,a(b).addClass(this.settings.pendingClass),this.pending[b.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],a(b).removeClass(this.settings.pendingClass),c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b,c){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,{method:c})})},destroy:function(){this.resetForm(),a(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},normalizeAttributeRule:function(a,b,c,d){/min|max|step/.test(c)&&(null===b||/number|range|text/.test(b))&&(d=Number(d),isNaN(d)&&(d=void 0)),d||0===d?a[c]=d:b===c&&"range"!==b&&(a[c]=!0)},attributeRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)"required"===c?(d=b.getAttribute(c),""===d&&(d=!0),d=!!d):d=f.attr(c),this.normalizeAttributeRule(e,g,c,d);return e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)&&delete e.maxlength,e},dataRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)d=f.data("rule"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase()),this.normalizeAttributeRule(e,g,c,d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)return void delete b[d];if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:(a.data(c.form,"validator").resetElements(a(c)),delete b[d])}}),a.each(b,function(d,e){b[d]=a.isFunction(e)&&"normalizer"!==d?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(null!=b.min&&null!=b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),null!=b.minlength&&null!=b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"===c.nodeName.toLowerCase()){var e=a(c).val();return e&&e.length>0}return this.checkable(c)?this.getLength(b,c)>0:b.length>0},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,b){return this.optional(b)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||d>=e},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},step:function(b,c,d){var e=a(c).attr("type"),f="Step attribute on input type "+e+" is not supported.",g=["text","number","range"],h=new RegExp("\\b"+e+"\\b"),i=e&&!h.test(g.join());if(i)throw new Error(f);return this.optional(c)||b%d===0},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.not(".validate-equalTo-blur").length&&e.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()},remote:function(b,c,d,e){if(this.optional(c))return"dependency-mismatch";e="string"==typeof e&&e||"remote";var f,g,h,i=this.previousValue(c,e);return this.settings.messages[c.name]||(this.settings.messages[c.name]={}),i.originalMessage=i.originalMessage||this.settings.messages[c.name][e],this.settings.messages[c.name][e]=i.message,d="string"==typeof d&&{url:d}||d,h=a.param(a.extend({data:b},d.data)),i.old===h?i.valid:(i.old=h,f=this,this.startRequest(c),g={},g[c.name]=b,a.ajax(a.extend(!0,{mode:"abort",port:"validate"+c.name,dataType:"json",data:g,context:f.currentForm,success:function(a){var d,g,h,j=a===!0||"true"===a;f.settings.messages[c.name][e]=i.originalMessage,j?(h=f.formSubmitted,f.resetInternals(),f.toHide=f.errorsFor(c),f.formSubmitted=h,f.successList.push(c),f.invalid[c.name]=!1,f.showErrors()):(d={},g=a||f.defaultMessage(c,{method:e,parameters:b}),d[c.name]=i.message=g,f.invalid[c.name]=!0,f.showErrors(d)),i.valid=j,f.stopRequest(c,j)}},d)),"pending")}}});var b,c={};a.ajaxPrefilter?a.ajaxPrefilter(function(a,b,d){var e=a.port;"abort"===a.mode&&(c[e]&&c[e].abort(),c[e]=d)}):(b=a.ajax,a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return"abort"===e?(c[f]&&c[f].abort(),c[f]=b.apply(this,arguments),c[f]):b.apply(this,arguments)})});

/*! jQuery Validation Plugin - v1.15.0 - 2/24/2016
 * http://jqueryvalidation.org/
 * Copyright (c) 2016 Jörn Zaefferer; Licensed MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery","../jquery.validate.min"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.extend(a.validator.messages,{required:"这是必填字段",remote:"请修正此字段",email:"请输入有效的电子邮件地址",url:"请输入有效的网址",date:"请输入有效的日期",dateISO:"请输入有效的日期 (YYYY-MM-DD)",number:"请输入有效的数字",digits:"只能输入数字",creditcard:"请输入有效的信用卡号码",equalTo:"你的输入不相同",extension:"请输入有效的后缀",maxlength:a.validator.format("最多可以输入 {0} 个字符"),minlength:a.validator.format("最少要输入 {0} 个字符"),rangelength:a.validator.format("请输入长度在 {0} 到 {1} 之间的字符串"),range:a.validator.format("请输入范围在 {0} 到 {1} 之间的数值"),max:a.validator.format("请输入不大于 {0} 的数值"),min:a.validator.format("请输入不小于 {0} 的数值")})});